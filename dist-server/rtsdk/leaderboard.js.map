{"version":3,"file":"leaderboard.js","names":["_dataObject","require","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","updateInAppLeaderboard","_ref2","_callee","_ref","leaderboardArray","req","sanitizedArray","date","score","id","highScores","_callee$","_context","Date","valueOf","data","kills","updateHighScores","_x","_ref4","_callee2","_ref3","arcadeAsset","dataObject","newArray","sortedArray","objectArray","highScoreArray","_callee2$","_context2","getAssetAndDataObject","concat","sort","a","b","dedupe","updateDataObject","t0","console","log","_x2","arr","rv","item","dedupedArray","map"],"sources":["../../src/rtsdk/leaderboard.js"],"sourcesContent":["// import moment from \"moment\";\nimport { getAssetAndDataObject } from \"./dataObject\";\n\nexport const updateInAppLeaderboard = async ({ leaderboardArray, req }) => {\n  // const { assetId, urlSlug } = req.body;\n  // const world = World.create(urlSlug, { credentials: req.body });\n  // const droppedAssets = await world.fetchDroppedAssetsWithUniqueName({\n  //   isPartial: true,\n  //   uniqueName: `multiplayer_leaderboard_${assetId}`,\n  // });\n  // if (!droppedAssets || !droppedAssets.length) return; // If no leaderboard components, don't update.\n\n  let sanitizedArray = [];\n  const date = new Date().valueOf();\n  for (var i = 0; i < 10; i++) {\n    let name = \"-\";\n    if (leaderboardArray[i]) {\n      const score = leaderboardArray[i].data.kills;\n      const id = leaderboardArray[i].id;\n      name = leaderboardArray[i].data.name;\n      if (id && score && name && date) sanitizedArray.push({ id, score, name, date });\n    }\n  }\n\n  const highScores = await updateHighScores({ req, sanitizedArray });\n  return highScores;\n};\n\nexport const updateHighScores = async ({ req, sanitizedArray }) => {\n  const arcadeAsset = await getAssetAndDataObject(req); // This seems to be creating issues with API\n  if (!arcadeAsset) return;\n  const { dataObject } = arcadeAsset;\n  const { highScores } = dataObject;\n\n  if (!sanitizedArray.length) return highScores;\n\n  // Don't update high score if the lowest high score is higher than the top current score.\n  if (\n    highScores &&\n    highScores[2] &&\n    sanitizedArray &&\n    sanitizedArray[0] &&\n    sanitizedArray[0].score < highScores[2].score\n  )\n    return highScores;\n\n  // This is to compare high score array to current scores array and update high scores if necessary.\n  let newArray = highScores ? sanitizedArray.concat(highScores) : sanitizedArray;\n  let sortedArray = newArray.sort((a, b) => {\n    return b.score - a.score;\n  });\n\n  const objectArray = dedupe(sortedArray);\n  const highScoreArray = objectArray.slice(0, 10);\n  // If they are the same, no need to update object or text.\n  if (highScores === highScoreArray) return highScores;\n\n  // for (let i = 0; i < highScoreArray.length; i++) {\n  //   let name = \"-\";\n  //   let date = \"-\";\n  //   let scoreString = \"-\";\n  //   if (highScoreArray[i]) {\n  //     const score = highScoreArray[i].score;\n  //     name = highScoreArray[i].name;\n  //     scoreString = score.toString() || \"0\";\n  //     date = moment(parseInt(highScoreArray[i].date)).fromNow();\n  //   }\n\n  //   updateText({\n  //     World,\n  //     req,\n  //     text: name,\n  //     uniqueName: `multiplayer_leaderboard_${req.body.assetId}_topPlayerName_${i}`,\n  //   });\n\n  //   updateText({\n  //     World,\n  //     req,\n  //     text: date,\n  //     uniqueName: `multiplayer_leaderboard_${req.body.assetId}_topDate_${i}`,\n  //   });\n\n  //   updateText({\n  //     World,\n  //     req,\n  //     text: scoreString,\n  //     uniqueName: `multiplayer_leaderboard_${req.body.assetId}_topScore_${i}`,\n  //   });\n  // }\n\n  try {\n    arcadeAsset.updateDataObject({ highScores: highScoreArray });\n    return highScoreArray;\n  } catch (e) {\n    console.log(\"Cannot update dropped asset\", e);\n  }\n};\n\n// Convert to object to dedupe\nfunction dedupe(arr) {\n  var rv = {};\n  for (var i = 0; i < arr.length; ++i) {\n    const item = arr[i];\n    if (item) {\n      const id = item.id;\n      // Remove duplicate player IDs and prevent score of 0 from being in high score array.\n      if (!rv[id] && item.score) rv[id] = item;\n    }\n  }\n  const dedupedArray = Object.keys(rv).map((id) => rv[id]);\n  return dedupedArray.sort((a, b) => {\n    return b.score - a.score;\n  });\n}\n"],"mappings":"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"}