{"version":3,"file":"main.js","names":["_path","_interopRequireDefault","require","_express","_socket","_lanceTopia","_WiggleServerEngine","_WiggleGameEngine","_index","obj","__esModule","PORT","process","env","INDEX","path","join","__dirname","server","express","get","req","res","sendFile","SERVER_START_DATE","Date","json","appVersion","getVersion","status","deploymentDate","envs","API_KEY","INSTANCE_DOMAIN","INTERACTIVE_KEY","GOOGLESHEETS_CLIENT_EMAIL","GOOGLESHEETS_SHEET_ID","GOOGLESHEETS_PRIVATE_KEY","NODE_ENV","use","requestHandler","listen","console","log","concat","io","socketIO","gameEngine","WiggleGameEngine","traceLevel","Lib","Trace","TRACE_ALL","serverEngine","WiggleServerEngine","debug","updateRate","fullSyncRate","timeoutInterval","start"],"sources":["../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport path from \"path\";\nimport express from \"express\";\nimport socketIO from \"socket.io\";\nimport { Lib } from \"@rtsdk/lance-topia\";\nimport WiggleServerEngine from \"./server/WiggleServerEngine\";\nimport WiggleGameEngine from \"./common/WiggleGameEngine\";\nimport { getVersion } from \"./utils/index.js\";\n\nconst PORT = process.env.PORT || 3000;\nconst INDEX = path.join(__dirname, \"../dist/index.html\");\n\n// define routes and socket\nconst server = express();\nserver.get(\"/\", function (req, res) {\n  res.sendFile(INDEX);\n});\n\nconst SERVER_START_DATE = new Date();\n\nserver.get(\"/system/health\", (req, res) => {\n  return res.json({\n    appVersion: getVersion(),\n    status: \"OK\",\n    deploymentDate: SERVER_START_DATE,\n    envs: {\n      API_KEY: process.env.API_KEY ? \"SET\" : \"NOT SET\",\n      INSTANCE_DOMAIN: process.env.INSTANCE_DOMAIN,\n      INTERACTIVE_KEY: process.env.INTERACTIVE_KEY,\n      GOOGLESHEETS_CLIENT_EMAIL: process.env.GOOGLESHEETS_CLIENT_EMAIL ? \"SET\" : \"NOT SET\",\n      GOOGLESHEETS_SHEET_ID: process.env.GOOGLESHEETS_SHEET_ID ? \"SET\" : \"NOT SET\",\n      GOOGLESHEETS_PRIVATE_KEY: process.env.GOOGLESHEETS_PRIVATE_KEY ? \"SET\" : \"NOT SET\",\n      NODE_ENV: process.env.NODE_ENV,\n    },\n  });\n});\n\nserver.use(\"/\", express.static(path.join(__dirname, \"../dist/\")));\nlet requestHandler = server.listen(PORT, () => console.log(`Listening on ${PORT}`));\nconst io = socketIO(requestHandler);\n\n// Game Instances\nconst gameEngine = new WiggleGameEngine({ traceLevel: Lib.Trace.TRACE_ALL });\nconst serverEngine = new WiggleServerEngine(io, gameEngine, {\n  debug: {},\n  updateRate: 2,\n  fullSyncRate: 12,\n  timeoutInterval: 600,\n});\n\n// start the game\nserverEngine.start();\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,mBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,iBAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,MAAA,GAAAN,OAAA;AAA8C,SAAAD,uBAAAQ,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAE9C,IAAME,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AACrC,IAAMG,KAAK,GAAGC,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,oBAAoB,CAAC;;AAExD;AACA,IAAMC,MAAM,GAAG,IAAAC,mBAAO,EAAC,CAAC;AACxBD,MAAM,CAACE,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAE;EAClCA,GAAG,CAACC,QAAQ,CAACT,KAAK,CAAC;AACrB,CAAC,CAAC;AAEF,IAAMU,iBAAiB,GAAG,IAAIC,IAAI,CAAC,CAAC;AAEpCP,MAAM,CAACE,GAAG,CAAC,gBAAgB,EAAE,UAACC,GAAG,EAAEC,GAAG,EAAK;EACzC,OAAOA,GAAG,CAACI,IAAI,CAAC;IACdC,UAAU,EAAE,IAAAC,iBAAU,EAAC,CAAC;IACxBC,MAAM,EAAE,IAAI;IACZC,cAAc,EAAEN,iBAAiB;IACjCO,IAAI,EAAE;MACJC,OAAO,EAAEpB,OAAO,CAACC,GAAG,CAACmB,OAAO,GAAG,KAAK,GAAG,SAAS;MAChDC,eAAe,EAAErB,OAAO,CAACC,GAAG,CAACoB,eAAe;MAC5CC,eAAe,EAAEtB,OAAO,CAACC,GAAG,CAACqB,eAAe;MAC5CC,yBAAyB,EAAEvB,OAAO,CAACC,GAAG,CAACsB,yBAAyB,GAAG,KAAK,GAAG,SAAS;MACpFC,qBAAqB,EAAExB,OAAO,CAACC,GAAG,CAACuB,qBAAqB,GAAG,KAAK,GAAG,SAAS;MAC5EC,wBAAwB,EAAEzB,OAAO,CAACC,GAAG,CAACwB,wBAAwB,GAAG,KAAK,GAAG,SAAS;MAClFC,QAAQ,EAAE1B,OAAO,CAACC,GAAG,CAACyB;IACxB;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFpB,MAAM,CAACqB,GAAG,CAAC,GAAG,EAAEpB,mBAAO,UAAO,CAACJ,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;AACjE,IAAIuB,cAAc,GAAGtB,MAAM,CAACuB,MAAM,CAAC9B,IAAI,EAAE;EAAA,OAAM+B,OAAO,CAACC,GAAG,iBAAAC,MAAA,CAAiBjC,IAAI,CAAE,CAAC;AAAA,EAAC;AACnF,IAAMkC,EAAE,GAAG,IAAAC,kBAAQ,EAACN,cAAc,CAAC;;AAEnC;AACA,IAAMO,UAAU,GAAG,IAAIC,4BAAgB,CAAC;EAAEC,UAAU,EAAEC,eAAG,CAACC,KAAK,CAACC;AAAU,CAAC,CAAC;AAC5E,IAAMC,YAAY,GAAG,IAAIC,8BAAkB,CAACT,EAAE,EAAEE,UAAU,EAAE;EAC1DQ,KAAK,EAAE,CAAC,CAAC;EACTC,UAAU,EAAE,CAAC;EACbC,YAAY,EAAE,EAAE;EAChBC,eAAe,EAAE;AACnB,CAAC,CAAC;;AAEF;AACAL,YAAY,CAACM,KAAK,CAAC,CAAC"}